<!DOCTYPE html>
<html>
  <head>
    <title>Chimpart Experiment Grounds: By Monky-ai</title>
  </head>
  <body>
    <canvas id="content" width="400" height="300"></canvas>
    <canvas id="filterzone" width="400" height="300"></canvas>
    <script>
      function $(a){return document.getElementById(a);}
      let canvas = $('content');
      let ctx = canvas.getContext('2d',{ willReadFrequently: true });
      function canvasRGB(currentContext = ctx){
        return currentContext.getImageData(0,0,canvas.width,canvas.height);
      }
      function applyFilter(imgData,filterString){
        let canvas2 = $('filterzone');
        let ctx2 = canvas.getContext('2d',{willReadFrequently:true});
        ctx2.filter = filterString;
        if(!(imgData instanceof Uint8Array))ctx2.drawImage(imgData,0,0,canvas2.width,canvas2.height);
        else ctx2.putImageData(imgData,0,0);
        return canvasRGB(ctx2);
      }
      function stringErr(str1, str2) {
        const m = str1.length;
        const n = str2.length;

        // Create a matrix to store the distances
        const dp = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));

        // Initialize the first row and column
        for (let i = 0; i <= m; i++) {
          dp[i][0] = i; // Cost of transforming str1[0...i-1] to an empty string (deletions)
        }
        for (let j = 0; j <= n; j++) {
          dp[0][j] = j; // Cost of transforming an empty string to str2[0...j-1] (insertions)
        }
        for (let i = 1; i <= m; i++) {
          for (let j = 1; j <= n; j++) {
            const cost = str1[i - 1] === str2[j - 1] ? 0 : 1; // Substitution 

            dp[i][j] = Math.min(
              dp[i - 1][j] + 1, // Deletion
              dp[i][j - 1] + 1, // Insertion
              dp[i - 1][j - 1] + cost // Substitution
            );
          }
        }

        return dp[m][n];
      } 
      /*I ALREADY IMPLEMENTED THE LEVENROSENGOLDMANALTMANBERGENSTEIN FUNCTION 3 BILLION FUCKING TIMES. 
      VIBE CODED SO I DONT HAVE TO DO IT AGAIN*/
      function imgOut(src){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        if(typeof src == 'string'){
          let newImg = new Image();
          newImg.src = src;
          newImg.onload = () => {
            ctx.drawImage(newImg,0,0,400,300);
          }
          return newImg;
        } else {
          ctx.putImageData(src,0,0);
        }
      }
      let filters = {
        blot:(imgData,intensity = 1)=>{
          ctx.filter = 'blur(2px) contrast(150%)';
          imgOut(imgData);
        }
      }
      let flightReacts = imgOut('./flightreacts.jpeg');
      imgOut(applyFilter(flightReacts,'blur(0px) contrast(150%)'));

      let data = [
        {label:'flight reacts',src:'./data/flightreacts.png'}
      ]
      class Visualchimp {
        constructor(temperature=0.3){
          this.config = {
            temperature:temperature
          }
        }
        out(prompt){
          let scores = [];
          for(let i=0;i<data.length;i++){
            let dataChunk = data[i];
            scores.push({data:dataChunk,score:stringErr(datachunk.label,prompt)});
          }
        }
      }
    </script>
  </body>
</html>
