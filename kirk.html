<canvas id="content" width="800" height="600"></canvas>

<script>
  function $(a){return document.getElementById(a);}
  let canvas = $('content');
  let ctx = canvas.getContext('2d');
  let sprites = {
    "kirk":{src:"./kirk.jpeg",ready:false}
  };
  Object.keys(sprites).forEach(spriteName => {
    let sprite = sprites[spriteName];
    sprite.img = new Image();
    sprite.img.src = sprite.src;
    sprite.img.onload = () => {
      sprite.ready = true;
    }
  });
  function drawSprite(sprite,x,y,w,h){
    if(sprite.ready){
      ctx.drawImage(sprite.img,x,y,w,h);
    }
  }
  let keys = {w:false,a:false,s:false,d:false," ":false};
  let groundHeight = 500;
  let player = {x:0,y:groundHeight,xVelocity:0,maxSpeed:2,accel:5,canJump:true}
  //xVelocity+=player.accel/100;

  document.onkeydown = (e) => {if(Object.keys(keys).includes(e.key.toLowerCase()))keys[e.key.toLowerCase()]=true;}
  document.onkeyup = (e) => {if(Object.keys(keys).includes(e.key.toLowerCase()))keys[e.key.toLowerCase()]=false;}
  function worldLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    if(keys.a && player.xVelocity > (0-player.maxSpeed))player.xVelocity-=player.accel/100;
    if(keys.d && player.xVelocity < player.maxSpeed)player.xVelocity+=player.accel/100;
    if(!keys.d && !keys.a){
      if(player.xVelocity < 0)player.xVelocity+=player.accel/100;
      if(player.xVelocity > 0)player.xVelocity-=player.accel/100;
    }
    player.x+=player.xVelocity;
    drawSprite(sprites["kirk"],player.x,player.y,100,100);
    setTimeout(worldLoop,10);
  }
  worldLoop();
</script>
